language: android
jdk: oraclejdk8
addons:
  apt:
    packages:
    - realpath
before_install:
- git clone --depth=1 https://github.com/secure-software-engineering/DroidBench.git
  /tmp/DroidBench
install:
- mvn clean verify -DskipTests=true -B -q
script:
- xvfb-run mvn clean verify -B -q
- bash ./dependent-projects-trigger.sh $AUTH_TOKEN
- bash ./upload-javascript.sh $GH_TOKEN
- jdk_switcher use oraclejdk7
- ./build-maven-jars.py "install -Dgpg.skip"
sudo: false
cache:
  directories:
  - "$HOME/.m2"
  - "$TRAVIS_BUILD_DIR/com.ibm.wala.core.testdata/ocaml/ocamljava-2.0-alpha1/lib"
env:
  secure: GTtE6dQXwex1+nZkA9fCrBl/nrl71nwSNrwH+KXEcTWRyLnxQPmGKeCey0kLX2bpVngGu7fi2CPZbGaOOm+0tm1kHZtNUUciVkt9qeA0cwdUHz7/EhfN6Xkj7wYZwQ4XUHMhxnHo9FtHK6IliArjUv84DNcDMHJbaiGcHPEmHGo=
