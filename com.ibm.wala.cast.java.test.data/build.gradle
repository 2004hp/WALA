sourceSets.test.java.srcDirs = ['src']


////////////////////////////////////////////////////////////////////////
//
//  download JLex
//

task downloadJLex {
	outputs.file 'src/JLex/Main.java'
	doLast {
		download {
			src 'http://www.cs.princeton.edu/~appel/modern/java/JLex/current/Main.java'
			dest outputs.files.singleFile
			overwrite true
			onlyIfModified true
			useETag true
		}
		verifyChecksum {
			src outputs.files.singleFile
			checksum 'fe0cff5db3e2f0f5d67a153cf6c783af'
		}
	}
}

task cleanDownloadJLex(type: Delete) {
	delete files(downloadJLex).singleFile.parent
}

compileTestJava.dependsOn downloadJLex
clean.dependsOn cleanDownloadJLex
